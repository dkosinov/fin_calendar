Vue.component('mainTab',{
    data: function () {
        return {
            periods: ["2019.01", "2019.02", "2019.03"],
            tableData: [
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Ромашка"',
                    id: '000111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Звёздочка"',
                    id: '000131',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                },
                {
                    name: 'ООО "Канделябр"',
                    id: '204111',
                    data: [
                        {
                            period: "2019.01",
                            saldoStart: 2000.00,
                            plan: 1000.00,
                            payment: 500.00,
                            zachet: 250.00,
                            invoice: 1000.00,
                        },
                        {
                            period: "2019.02",
                            saldoStart: 2300.00,
                            plan: 2000.00,
                            payment: 100.00,
                            zachet: 0.00,
                            invoice: 1500.00,
                        },
                        {
                            period: "2019.03",
                            saldoStart: 4000.00,
                            plan: 1500.00,
                            payment: 700.00,
                            zachet: 0.00,
                            invoice: 3000.00,
                        },
                    ]
                }
            ],
            tableVals: [],
        }
    },
    computed: {
        tableValsPrep: function () {
            let deviation = 0;
            let debt = 0;
            let saldoStart = 0;
            let saldoEnd = 0;
            for (let i=0; i<this.tableData.length; i++) {
                this.tableVals.push([this.tableData[i].name]);
                for (let j=0; j<this.tableData[i].data.length; j++) {
                    if (j === 0) {
                        saldoStart = this.tableData[i].data[j].saldoStart;
                        this.tableVals[i].push(saldoStart);
                    } else {
                        saldoStart = this.tableVals[i][this.tableVals[i].length-1];
                    };
                    this.tableVals[i].push(this.tableData[i].data[j].plan);
                    this.tableVals[i].push(this.tableData[i].data[j].payment);
                    this.tableVals[i].push(this.tableData[i].data[j].zachet);
                    deviation = this.tableData[i].data[j].plan - this.tableData[i].data[j].payment - this.tableData[i].data[j].zachet;
                    this.tableVals[i].push(deviation);
                    debt = saldoStart - this.tableData[i].data[j].payment - this.tableData[i].data[j].zachet;
                    this.tableVals[i].push(debt);
                    this.tableVals[i].push(this.tableData[i].data[j].invoice);
                    saldoEnd = debt + this.tableData[i].data[j].invoice;
                    this.tableVals[i].push(saldoEnd);
                }
            }
        }
    },
    filters: {
        formatData: function (data) {
            return data.toFixed(2);
        }
    },
    template: `<div class="main-table-container">
                   <div class="flex-container">
                        <div v-for="(period, index) of periods">
                            <div v-if="index == 0"
                                 class="grid-title-container-1">
                                <div class="title-row-name">Статья/Контрагент</div>
                                <div class="title-row-period">{{period}}</div>
                                <div class="title-row-saldo">Сальдо н.п.</div>
                                <div class="title-row-data">План</div>
                                <div class="title-row-data">Оплачено</div>
                                <div class="title-row-data">Зачтено</div>
                                <div class="title-row-data">Отклонение<br>от плана</div>
                                <div class="title-row-data">Задолжен-<br>ность</div>
                                <div class="title-row-data">Начислено</div>
<!--                                <div class="title-row-data">Сальдо к.п.</div>-->
                            </div>
                            <div v-else class="grid-title-container-2">
                                <div class="title-row-name-empty"></div>
                                <div class="title-row-period">{{period}}</div>
                                <div class="title-row-saldo">Сальдо н.п.</div>
                                <div class="title-row-data">План</div>
                                <div class="title-row-data">Оплачено</div>
                                <div class="title-row-data">Зачтено</div>
                                <div class="title-row-data">Отклонение<br>от плана</div>
                                <div class="title-row-data">Задолжен-<br>ность</div>
                                <div class="title-row-data">Начислено</div>
<!--                                <div class="title-row-data">Сальдо к.п.</div>-->
                            </div>
                        </div>
                   </div>
                    <div v-for="(org, index) of tableData"
                        :key="index"
                        class="flex-container">
                        <span><div class="data-row-name">{{org.name}}</div></span>
                        <div v-for="(orgData, index) of org.data"
                            :key="index"
                            class="flex-container">                                                   
                            <div class="data-row-data">{{orgData.saldoStart | formatData}}</div>
                            <div class="data-row-data">{{orgData.plan | formatData}}</div>
                            <div class="data-row-data">{{orgData.payment | formatData}}</div>
                            <div class="data-row-data">{{orgData.zachet | formatData}}</div>
                            <div class="data-row-data">{{orgData.plan - orgData.payment - orgData.zachet | formatData}}</div>
                            <div class="data-row-data">{{orgData.saldoStart - orgData.payment - orgData.zachet | formatData}}</div>
                            <div class="data-row-data">{{orgData.invoice | formatData}}</div>
<!--                            <div class="data-row-data">{{orgData.saldoStart - orgData.payment - orgData.zachet + orgData.invoice | formatData}}</div>-->
                        </div>
                    </div>
                </div>`
})